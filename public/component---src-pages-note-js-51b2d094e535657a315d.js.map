{"version":3,"sources":["webpack://jotter/./src/hooks/useFetchNote.js","webpack://jotter/./src/pages/note.js"],"names":["bookID","noteID","isAuthenticated","useState","hasFetchedNote","setHasFetchedNote","note","setNote","error","setError","loading","setLoading","user","useAuth0","useEffect","fetchNote","getNote","email","result","message","location","queryString","search","book","useFetchNote","Layout","title","TextEditor","username","initialContent","convertFromRaw","JSON","parse","content","noteTitle","existingNote","editMode","minHeight","Loading","src","LoadingIcon","alt","className"],"mappings":"iQAsCA,EAlCqB,SAACA,EAAQC,EAAQC,GACpC,OAA4CC,eAAS,GAA9CC,EAAP,KAAuBC,EAAvB,KACA,GAAwBF,cAAS,MAA1BG,EAAP,KAAaC,EAAb,KACA,GAA0BJ,cAAS,MAA5BK,EAAP,KAAcC,EAAd,KACA,GAA8BN,eAAS,GAAhCO,EAAP,KAAgBC,EAAhB,KACQC,GAASC,UAATD,KA0BR,OAxBAE,gBAAU,WACR,IAAMC,EAAS,mCAAG,2FAChBV,GAAkB,GAClBM,GAAW,GAFK,mBAIKK,QAAQJ,EAAKK,MAAOjB,EAAQC,GAJjC,OAIViB,EAJU,OAKdX,EAAQW,GACRb,GAAkB,GANJ,kDAQdI,EAAS,KAAMU,SARD,QAUhBR,GAAW,GAVK,0DAAH,qDAaVT,EAKDU,WAAMK,OACRF,IALAJ,GAAW,KAOZ,CAACT,EAAiBU,aAAlB,EAAkBA,EAAMK,MAAOjB,EAAQC,IAEnC,CAAEK,OAAMF,iBAAgBI,QAAOE,Y,oBCiBxC,EAzCa,SAAC,GAAkB,IAAhBU,EAAe,EAAfA,SACd,GAAkCP,UAA1BD,EAAR,EAAQA,KAAMV,EAAd,EAAcA,gBACRF,EAASqB,QAAkBD,EAASE,QAAQC,KAC5CtB,EAASoB,QAAkBD,EAASE,QAAQhB,KAClD,EAA0CkB,EACxCxB,EACAC,EACAC,GAHMI,EAAR,EAAQA,KAAMF,EAAd,EAAcA,eAAgBM,EAA9B,EAA8BA,QAM9B,OAAe,OAAXV,EACK,gBAAC,KAAD,MAGL,gBAACyB,EAAA,EAAD,CAAQC,MAAM,QACXtB,GACC,gBAACuB,EAAA,EAAD,CACEC,SAAUhB,EAAKK,MACfjB,OAAQA,EACRC,OAAQA,EACR4B,gBAAgBC,oBAAeC,KAAKC,MAAM1B,EAAK2B,UAC/CC,UAAW5B,EAAK4B,UAChBC,cAAc,EACdC,UAAU,IAGb1B,GACC,gBAAC,IAAD,CAAS2B,UAAU,SACjB,gBAACC,EAAA,EAAD,CACED,UAAU,OACVE,IAAKC,IACLC,IAAI,eACJC,UAAU","file":"component---src-pages-note-js-51b2d094e535657a315d.js","sourcesContent":["import { useState, useEffect } from \"react\";\nimport { getNote } from \"../services/realm/API\";\nimport { useAuth0 } from \"@auth0/auth0-react\";\n\nconst useFetchNote = (bookID, noteID, isAuthenticated) => {\n  const [hasFetchedNote, setHasFetchedNote] = useState(false);\n  const [note, setNote] = useState(null);\n  const [error, setError] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const { user } = useAuth0();\n\n  useEffect(() => {\n    const fetchNote = async () => {\n      setHasFetchedNote(false);\n      setLoading(true);\n      try {\n        let result = await getNote(user.email, bookID, noteID);\n        setNote(result);\n        setHasFetchedNote(true);        \n      } catch (error) {\n        setError(error.message);\n      }\n      setLoading(false);\n    };\n\n    if (!isAuthenticated) {\n      setLoading(true);\n      return;\n    }\n\n    if (user?.email) {\n      fetchNote();\n    }\n  }, [isAuthenticated, user?.email, bookID, noteID]);\n\n  return { note, hasFetchedNote, error, loading };\n};\n\nexport default useFetchNote;\n","import React from \"react\";\nimport Layout from \"../components/Page/Layout\";\nimport { RedirectHome } from \"../components/Routing\";\nimport { convertFromRaw } from \"draft-js\";\nimport TextEditor from \"../components/Editor/TextEditor\";\nimport * as queryString from \"query-string\";\nimport { useAuth0 } from \"@auth0/auth0-react\";\nimport useFetchNote from \"../hooks/useFetchNote\";\nimport { Wrapper, Loading } from \"../components/Notification & Error/Loading\";\nimport LoadingIcon from \"../assets/loading.svg\";\n\nconst Note = ({ location }) => {\n  const { user, isAuthenticated } = useAuth0();\n  const bookID = queryString.parse(location.search).book;\n  const noteID = queryString.parse(location.search).note;\n  const { note, hasFetchedNote, loading } = useFetchNote(\n    bookID,\n    noteID,\n    isAuthenticated\n  );\n\n  if (bookID === null) {\n    return <RedirectHome />;\n  } else {\n    return (\n      <Layout title=\"Note\">\n        {hasFetchedNote && (\n          <TextEditor\n            username={user.email}\n            bookID={bookID}\n            noteID={noteID}\n            initialContent={convertFromRaw(JSON.parse(note.content))}\n            noteTitle={note.noteTitle}\n            existingNote={true}\n            editMode={false}\n          />\n        )}\n        {loading && (\n          <Wrapper minHeight=\"100vh\">\n            <Loading\n              minHeight=\"50vh\"\n              src={LoadingIcon}\n              alt=\"Loading icon\"\n              className=\"rotating\"\n            />\n          </Wrapper>\n        )}\n      </Layout>\n    );\n  }\n};\n\nexport default Note;\n"],"sourceRoot":""}