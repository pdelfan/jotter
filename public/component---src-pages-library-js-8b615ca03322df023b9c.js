(self.webpackChunkjotter=self.webpackChunkjotter||[]).push([[255],{3372:function(e,n,t){"use strict";t.d(n,{Z:function(){return f},F:function(){return h}});var r,o,a,i,c=t(5761),u=t(7294),s=t(9925),l=t(5444),d=s.ZP.div(r||(r=(0,c.Z)(["\n  transition: 0.2s;\n  flex: 0 0 17rem;\n\n  .cover {\n    box-shadow: var(--book-shadow);\n    border: var(--book-border);\n    border-radius: var(--book-round);\n    max-height: 200px;\n  }\n\n  h3 {\n    font-weight: 600;\n    color: var(--book-title);\n    line-height: 1.5rem;\n    margin-top: 0.5rem;\n    margin-bottom: 0.3rem;\n  }\n\n  h4 {\n    font-size: 0.8rem;\n    font-weight: 600;\n    color: var(--book-author);\n    margin-top: 0;\n    margin-bottom: 0.5rem;\n  }\n\n  h5 {\n    font-weight: 500;\n    color: var(--book-date);\n    margin-top: 0;\n  }\n"]))),m=s.ZP.div(o||(o=(0,c.Z)(["\n  max-width: 14rem;\n  word-wrap: break-word;\n"]))),p=(0,s.ZP)(l.Link)(a||(a=(0,c.Z)(["\n  transition: 0.2s;\n  flex: 0 1 17rem;\n  margin-bottom: 10rem;\n\n  &:hover {\n    transform: translateY(-0.5rem);\n    transition: 0.2s;\n  }\n"])));function f(e){var n=e.isbn,t=e.cover,r=e.title,o=e.author,a=e.date,i=e.isLink,c=e.percentageRead,s=e.children,l=e.to,f=function(e){var t=e.children,r=e.to;return e.isLink?u.createElement(p,{to:r,state:{isbn:n,percentageRead:c}},t):u.createElement(u.Fragment,null,t)};return u.createElement(f,{isLink:i,to:l},u.createElement(d,null,u.createElement("img",{src:t,alt:"Book cover",className:"cover"}),u.createElement(m,null,u.createElement("h3",null,r),u.createElement("h4",null,o),u.createElement("h5",null,a)),s))}var h=s.ZP.div(i||(i=(0,c.Z)(["\n  display: flex;\n  justify-content: space-between;\n  flex-wrap: wrap;\n  margin-top: 5rem;\n"])))},2441:function(e,n,t){"use strict";t.d(n,{i:function(){return c},g:function(){return u}});var r,o,a=t(5761),i=t(9925),c=i.ZP.div(r||(r=(0,a.Z)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  min-height: ",";\n"])),(function(e){return e.minHeight||"50rem"})),u=i.ZP.img(o||(o=(0,a.Z)(["\n  width: 8rem;\n  margin: 1rem auto 1rem auto;\n  -webkit-animation: spin 4s linear infinite;\n  -moz-animation: spin 4s linear infinite;\n  animation: spin 4s linear infinite;\n  min-height: ",";\n"])),(function(e){return e.minHeight||"50rem"}))},4816:function(e,n,t){"use strict";t.d(n,{Cq:function(){return u},rC:function(){return s}});var r=t(9756),o=t(7294),a=t(4558),i=t(5444),c=t(7721),u=function(e){e.component,(0,r.Z)(e,["component"]);return(0,i.navigate)("/"),o.createElement(c.default,null)},s=function(e){var n=e.component,t=e.path,c=(0,r.Z)(e,["component","path"]),u=(0,a.D3)(),s=u.loading,l=u.isAuthenticated,d=u.loginWithRedirect;return(0,o.useEffect)((function(){l&&(0,i.navigate)("/library")}),[s,l,d,t]),!0===l?o.createElement(n,c):null};n.ZP=function(e){var n=e.component,t=e.path,c=(0,r.Z)(e,["component","path"]),u=(0,a.D3)(),s=u.loading,l=u.isAuthenticated,d=u.loginWithRedirect;return(0,o.useEffect)((function(){s||l||(0,i.navigate)("/")}),[s,l,d,t]),!0===l?o.createElement(n,c):null}},7721:function(e,n,t){"use strict";t.r(n);var r=t(7294),o=t(9319),a=t(2352),i=t(4558),c=t(3372),u=t(508),s=t(9694),l=t(4816),d=t(2441);n.default=function e(){var n=(0,i.D3)(),t=n.user,m=n.isAuthenticated,p=n.isLoading,f=(0,r.useState)([]),h=f[0],b=f[1],v=(0,r.useState)(!1),g=v[0],k=v[1];return(0,r.useEffect)((function(){t&&(k(!0),(0,u.av)(t.nickname).then((function(e){b(e),k(!1)})).catch((function(e){console.log(e)})))}),[t]),m&&!p?r.createElement(o.Z,{heading:"Library",subheading:"All your books in one place"},g?r.createElement(d.i,{minHeight:"60vh"},r.createElement(d.g,{minHeight:"50vh",src:a.Z,alt:"Loading icon",className:"rotating"})):r.createElement(c.F,null,h.map((function(e){return r.createElement(c.Z,{key:e.bookTitle+e.cover,isLink:!0,to:"/book/",isbn:e.isbn,shouldHover:!0,cover:e.cover,title:e.bookTitle,author:e.author.join(", "),date:e.year,percentageRead:e.percentageRead})})))):r.createElement(s.Router,null,r.createElement(l.rC,{path:"/",component:e}))}},508:function(e,n,t){"use strict";t.d(n,{av:function(){return s},yy:function(){return l},Jl:function(){return d},Zo:function(){return m},_J:function(){return p},T_:function(){return f}});var r=t(2137),o=t(7757),a=t.n(o),i=t(1070),c=t.n(i),u=t(3092),s=function(){var e=(0,r.Z)(a().mark((function e(n){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c().get(u.baseurl+"library?user="+n);case 3:return t=e.sent,e.abrupt("return",t.data[0].library);case 7:e.prev=7,e.t0=e.catch(0),console.error("getLibrary error:",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n){return e.apply(this,arguments)}}(),l=function(){var e=(0,r.Z)(a().mark((function e(n,t,r,o,i,s,l){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{c().post(u.baseurl+"add-book-library",null,{params:{user:n,title:t,bookAuthor:r,bookYear:o,bookCover:i,bookAddedDate:s,bookIsbn:l}}).then(console.log("added book to library"))}catch(a){console.error("error (couldn't add book to library):",a.response)}case 1:case"end":return e.stop()}}),e)})));return function(n,t,r,o,a,i,c){return e.apply(this,arguments)}}(),d=function(){var e=(0,r.Z)(a().mark((function e(n){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c().get(u.baseurl+"to-read?user="+n);case 3:return t=e.sent,e.abrupt("return",t.data[0].toRead);case 7:e.prev=7,e.t0=e.catch(0),console.error("getToRead error:",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n){return e.apply(this,arguments)}}(),m=function(){var e=(0,r.Z)(a().mark((function e(n,t,r,o,i,s,l){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{c().post(u.baseurl+"add-book-to-read",null,{params:{user:n,title:t,bookAuthor:r,bookYear:o,bookCover:i,bookAddedDate:s,bookIsbn:l}}).then(console.log("added book to to-read"))}catch(a){console.error("error (couldn't add book to to-read):",a.response)}case 1:case"end":return e.stop()}}),e)})));return function(n,t,r,o,a,i,c){return e.apply(this,arguments)}}(),p=function(){var e=(0,r.Z)(a().mark((function e(n,t,r){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{c().post(u.baseurl+"update-reading",null,{params:{user:n,bookID:t,percentageRead:r}}).then(console.log("Updated percentage read with the value: ",r))}catch(o){console.error("error (Couldn't update percentage read):",o.response)}case 1:case"end":return e.stop()}}),e)})));return function(n,t,r){return e.apply(this,arguments)}}(),f=function(){var e=(0,r.Z)(a().mark((function e(n,t){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c().get(u.baseurl+"percentageRead?user="+n+"&bookID="+t);case 3:return r=e.sent,e.abrupt("return",r.data);case 7:e.prev=7,e.t0=e.catch(0),console.error("getToRead error:",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n,t){return e.apply(this,arguments)}}()},2352:function(e,n){"use strict";n.Z="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSIjQzVDNUM1Ij48cGF0aCBkPSJNMTIsMjJjNS40MjEsMCwxMC00LjU3OSwxMC0xMGgtMmMwLDQuMzM3LTMuNjYzLDgtOCw4cy04LTMuNjYzLTgtOGMwLTQuMzM2LDMuNjYzLTgsOC04VjJDNi41NzksMiwyLDYuNTgsMiwxMiBDMiwxNy40MjEsNi41NzksMjIsMTIsMjJ6Ii8+PC9zdmc+"}}]);
//# sourceMappingURL=component---src-pages-library-js-8b615ca03322df023b9c.js.map