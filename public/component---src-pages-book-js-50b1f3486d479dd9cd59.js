(self.webpackChunkjotter=self.webpackChunkjotter||[]).push([[353],{5346:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return U}});var n=r(7294),o=r(655),a=r(3835),i=r(2352),l=r(9450),c=r(3650),d=r(7766),s=r(2137),m=r(7757),g=r.n(m),u=function(e,t,r){var o=(0,n.useState)(!1),a=o[0],i=o[1],l=(0,n.useState)(null),c=l[0],d=l[1],m=(0,n.useState)(null),u=m[0],p=m[1];return(0,n.useEffect)((function(){null===c&&function(){var n=(0,s.Z)(g().mark((function n(){var o;return g().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e){n.next=2;break}return n.abrupt("return");case 2:return n.prev=2,n.next=5,r(e.email,t);case 5:o=n.sent,d(o),i(!0),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(2),p(n.t0.message);case 13:case"end":return n.stop()}}),n,null,[[2,10]])})));return function(){return n.apply(this,arguments)}}()()}),[e,t,r,c]),{data:c,hasFetched:a,error:u}},p=r(508),f=r(9925),b=r(863),h=f.ZP.div.withConfig({displayName:"ReadingProgress__Container",componentId:"sc-1wcv91b-0"})(["display:flex;flex-wrap:wrap;flex:1;flex-grow:1;row-gap:1rem;justify-content:space-between;align-items:center;background-color:#fdfdfd;padding:0.8rem 1.8rem;border:var(--gray-border);border-radius:var(--round);"]),w=f.ZP.div.withConfig({displayName:"ReadingProgress__Info",componentId:"sc-1wcv91b-1"})(["flex-grow:0.7;"]),v=f.ZP.h5.withConfig({displayName:"ReadingProgress__Title",componentId:"sc-1wcv91b-2"})(["font-size:1.3rem;color:#333;margin-bottom:0.5rem;margin-top:0;"]),y=f.ZP.progress.withConfig({displayName:"ReadingProgress__ProgressBar",componentId:"sc-1wcv91b-3"})(["appearance:none;-webkit-appearance:none;-moz-appearance:none;overflow:hidden;height:0.7rem;width:100%;background-color:#c4f1d8;border-radius:var(--round);&::-webkit-progress-bar{background-color:#c4f1d8;}&::-webkit-progress-value{background-color:#3aae5b;}&::-moz-progress-bar{background-color:#3aae5b;}"]),E=f.ZP.p.withConfig({displayName:"ReadingProgress__Description",componentId:"sc-1wcv91b-4"})(["color:#3aae5b;font-weight:700;margin-top:0.5rem;margin-bottom:0;"]),_=f.ZP.div.withConfig({displayName:"ReadingProgress__Modal",componentId:"sc-1wcv91b-5"})(["display:flex;justify-content:space-between;float:right;background-color:#fdfdfd;padding:0.8rem 1.8rem;margin-top:0.5rem;border:var(--gray-border);box-shadow:var(--general-shadow);visibility:",";animation:"," 0.1s linear;transition:visibility 0.1s linear;"],(function(e){return e.out?"hidden":"visible"}),(function(e){return e.out?C:k})),k=(0,f.F4)(["from{transform:scale(0.25);opacity:0;}to{transform:scale(1);opacity:1;}"]),C=(0,f.F4)(["from{transform:scale(1);opacity:1;}to{transform:scale(.25);opacity:0;}"]),N=f.ZP.input.withConfig({displayName:"ReadingProgress__Input",componentId:"sc-1wcv91b-6"})(["border:var(--gray-border);font-weight:bold;font-size:1rem;text-align:center;max-width:5rem;color:gray;::placeholder{text-align:center;color:darkgray;}"]),P=f.ZP.label.withConfig({displayName:"ReadingProgress__Label",componentId:"sc-1wcv91b-7"})(["align-self:center;margin-left:0.3rem;margin-right:1rem;color:#949494;font-weight:600;"]),x=f.ZP.button.withConfig({displayName:"ReadingProgress__UpdateButton",componentId:"sc-1wcv91b-8"})(["background-color:transparent;border:2px solid #888;color:#888;font-size:1rem;font-weight:bold;padding:0.4rem 0.7rem;&:hover{border:2px solid #555;color:#555;}"]),I=f.ZP.button.withConfig({displayName:"ReadingProgress__Submit",componentId:"sc-1wcv91b-9"})(["background-color:transparent;border:2px solid #3aae5b;color:#3aae5b;font-weight:bold;font-size:1rem;padding:0.4rem 0.7rem;margin-left:1rem;&:hover{border:2px solid #31944d;color:#31944d;}"]),Z=function(e){var t=e.percentage,r=e.user,o=e.isbn,a=(0,n.useState)(!1),i=a[0],l=a[1],c=(0,n.useRef)(),d=(0,n.useState)(t),s=d[0],m=d[1],g=(0,n.useState)(""),u=g[0],f=g[1];return(0,n.useEffect)((function(){document.addEventListener("mousedown",(function(e){var t;null!=c&&null!==(t=c.current)&&void 0!==t&&t.contains(e.target)||(l(!1),f(""))}))}),[c,s]),n.createElement("div",{ref:c},n.createElement(h,null,n.createElement(w,null,n.createElement(v,null,"Reading Progress"),n.createElement(y,{value:s,max:"100"}),n.createElement(E,null,function(e){return"0"===e?"Not read":"100"===e?"Completed":e+"% read"}(s))),n.createElement(x,{onClick:function(){return l(!i)}},"Update")),n.createElement(_,{out:!i},n.createElement(N,{placeholder:s,onChange:function(e){f(e.target.value)},value:u}),n.createElement(P,null,"%"),n.createElement(I,{onClick:function(e){e.preventDefault(),(0,p._J)(r,o,u).then((function(){l(!1),m(u),f(""),(0,b.Vp)("Your reading progress has been updated")}),(function(e){400===e?(0,b.GU)("Invalid request: Couldn't update your reading progress."):(0,b.HJ)(e,"Something went wrong. Check your internet connection and try again.")}))}},"Submit")))},R=r(6471),D=r(5444),z=f.ZP.div.withConfig({displayName:"Note__NoteContainer",componentId:"sc-1ptx9dd-0"})(["display:flex;flex-wrap:wrap;margin-top:3rem;gap:1rem;"]),F=(0,f.ZP)(D.Link).withConfig({displayName:"Note__Wrapper",componentId:"sc-1ptx9dd-1"})(["   padding:1rem;border:var(--purple-border);border-radius:var(--round);&:hover{border:var(--purple-border-hover);}"]),S=f.ZP.h5.withConfig({displayName:"Note__Title",componentId:"sc-1ptx9dd-2"})(["color:#4C3E67;font-size:1.3rem;font-weight:600;margin:0;max-width:25rem;"]),T=f.ZP.h6.withConfig({displayName:"Note__Date",componentId:"sc-1ptx9dd-3"})(["color:#4C3E67;font-size:0.9rem;font-weight:normal;margin-top:1rem;margin-bottom:0;"]),H=function(e){var t=e.title,r=e.date,o=e.noteID,a=e.bookID;return n.createElement(F,{to:"/note?book="+a+"&note="+o},n.createElement(S,null,t),n.createElement(T,null,r))},B=r(9188),j=r(4816),A=r(2163),L=(0,f.ZP)(D.Link).withConfig({displayName:"book__AddNoteButton",componentId:"sc-14e1zmi-0"})(["display:flex;align-items:center;justify-content:space-between;column-gap:0.3rem;background-color:white;color:#6b6b6b;font-weight:bold;padding:0.5rem 1rem;border:var(--gray-border);box-shadow:var(--general-shadow);&:hover{border:var(--gray-border-hover);color:#555;}"]),O=f.ZP.h3.withConfig({displayName:"book__NoNotesMessage",componentId:"sc-14e1zmi-1"})(["color:#888;font-weight:normal;font-size:1.3rem;margin:2rem auto;"]),U=function(e){var t=e.location,r=(0,a.D3)().user,s=A.parse(t.search).id,m=(0,d.Z)(s),g=m.data,f=m.hasFetched,b=u(r,s,p.T_),h=b.data,w=b.hasFetched,v=u(r,s,p.Kk),y=v.data,E=v.hasFetched;return null===s?n.createElement(j.Cq,null):n.createElement(o.Z,null,n.createElement(R.Z,{header:"Book",subheader:"In your library"}),f&&w&&n.createElement(l.H,{cover:g.cover,title:g.title,author:g.author,date:g.date,desc:g.desc,category:g.category,length:g.length,avgRating:g.avgRating,ratings:g.ratings,language:g.language,isbn:g.isbn,username:r.email,deleteButton:!0,redirectAfterDelete:"/"},n.createElement(Z,{percentage:h,isbn:g.isbn,user:r.email}),console.log("FETCHED BOOK"),console.log("FETCHED PERCENTAGE")),!f&&n.createElement(c.i,{minHeight:"50vh"},n.createElement(c.g,{minHeight:"30vh",src:i.Z,alt:"Loading icon",className:"rotating"})),n.createElement(R.Z,{header:"Notes",subheader:"All your notes on this book"},n.createElement(L,{to:"/add-note",state:{isbn:s,user:r}},n.createElement(B.dt,{color:"#6b6b6b"}),"Add Note")),E&&n.createElement(z,null,y.map((function(e){return n.createElement(H,{title:e.noteTitle,date:e.date,key:e._noteID,noteID:e._noteID,bookID:s})})),console.log("NOTE FETCHED",y),0===y.length&&n.createElement(O,null,"You don't have any notes for this book yet.")))}}}]);
//# sourceMappingURL=component---src-pages-book-js-50b1f3486d479dd9cd59.js.map