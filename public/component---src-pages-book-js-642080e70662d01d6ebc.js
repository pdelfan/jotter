(self.webpackChunkjotter=self.webpackChunkjotter||[]).push([[353],{1974:function(e,r,n){"use strict";n.r(r),n.d(r,{default:function(){return j}});var t=n(7294),a=n(1608),o=n(6471),i=n(4558),c=n(2352),s=n(4816),l=n(6168),d=n(9694),u=n(9837),g=n(3650),m=n(7766),f=n(2137),p=n(7757),b=n.n(p),h=n(508),v=function(e,r){var n=(0,t.useState)(!1),a=n[0],o=n[1],i=(0,t.useState)(null),c=i[0],s=i[1],l=(0,t.useState)(null),d=l[0],u=l[1];return(0,t.useEffect)((function(){(function(){var n=(0,f.Z)(b().mark((function n(){var t;return b().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e){n.next=14;break}return n.prev=1,o(!1),n.next=5,(0,h.T_)(e.email,r);case 5:t=n.sent,s(t),o(!0),n.next=14;break;case 10:n.prev=10,n.t0=n.catch(1),console.log(n.t0.message),u(n.t0.message);case 14:case"end":return n.stop()}}),n,null,[[1,10]])})));return function(){return n.apply(this,arguments)}})()()}),[e,r,c]),{data:c,hasFetched:a,error:d}},w=n(9925),y=n(863),k=w.ZP.div.withConfig({displayName:"ReadingProgress__Container",componentId:"sc-1wcv91b-0"})(["display:flex;flex-wrap:wrap;flex:1;flex-grow:1;justify-content:space-between;align-items:center;background-color:white;padding:0.8rem 1.8rem;border:var(--general-border);border-radius:var(--round);box-shadow:var(--general-shadow);"]),E=w.ZP.div.withConfig({displayName:"ReadingProgress__Info",componentId:"sc-1wcv91b-1"})(["flex-grow:0.7;"]),P=w.ZP.h5.withConfig({displayName:"ReadingProgress__Title",componentId:"sc-1wcv91b-2"})(["font-size:1.3rem;color:#374151;margin:0;"]),_=w.ZP.progress.withConfig({displayName:"ReadingProgress__ProgressBar",componentId:"sc-1wcv91b-3"})(["appearance:none;-webkit-appearance:none;-moz-appearance:none;overflow:hidden;border-radius:var(--round);height:0.7rem;width:100%;background-color:#c4f1d8;&::-webkit-progress-bar{background-color:#c4f1d8;}&::-webkit-progress-value{background-color:#3aae5b;}&::-moz-progress-bar{background-color:#3aae5b;}"]),C=w.ZP.p.withConfig({displayName:"ReadingProgress__Description",componentId:"sc-1wcv91b-4"})(["color:#3aae5b;font-weight:500;margin:0;"]),Z=w.ZP.div.withConfig({displayName:"ReadingProgress__Modal",componentId:"sc-1wcv91b-5"})(["display:flex;justify-content:space-between;float:right;background-color:white;padding:0.8rem 1.8rem;margin-top:0.5rem;border:var(--general-border);border-radius:var(--round);box-shadow:var(--general-shadow);visibility:",";animation:"," 0.1s linear;transition:visibility 0.1s linear;"],(function(e){return e.out?"hidden":"visible"}),(function(e){return e.out?R:x})),x=(0,w.F4)(["from{transform:scale(0.25);opacity:0;}to{transform:scale(1);opacity:1;}"]),R=(0,w.F4)(["from{transform:scale(1);opacity:1;}to{transform:scale(.25);opacity:0;}"]),I=w.ZP.input.withConfig({displayName:"ReadingProgress__Input",componentId:"sc-1wcv91b-6"})(["border-radius:10rem;border:var(--general-border);font-weight:600;font-size:1rem;text-align:center;width:5rem;color:gray;::placeholder{text-align:center;color:darkgray;}"]),N=w.ZP.label.withConfig({displayName:"ReadingProgress__Label",componentId:"sc-1wcv91b-7"})(["align-self:center;margin-left:0.3rem;margin-right:1rem;color:#949494;font-weight:600;"]),S=w.ZP.button.withConfig({displayName:"ReadingProgress__UpdateButton",componentId:"sc-1wcv91b-8"})(["background-color:#e9edf1;color:#5a5c62;font-weight:600;font-size:1rem;padding:0.4rem 0.7rem;border-radius:0.9rem;&:hover{background-color:#d6dce0;}"]),z=w.ZP.button.withConfig({displayName:"ReadingProgress__Submit",componentId:"sc-1wcv91b-9"})(["background-color:#3aae5b;color:white;font-weight:600;font-size:1rem;padding:0.4rem 0.7rem;margin-left:1rem;border-radius:0.9rem;&:hover{background-color:#37a556;}"]),F=function(e){var r=e.percentage,n=e.user,a=e.isbn,o=(0,t.useState)(!1),i=o[0],c=o[1],s=(0,t.useRef)(),l=(0,t.useState)(r),d=l[0],u=l[1],g=(0,t.useState)(""),m=g[0],f=g[1];return(0,t.useEffect)((function(){document.addEventListener("mousedown",(function(e){var r;null!=s&&null!==(r=s.current)&&void 0!==r&&r.contains(e.target)||(c(!1),f(""))}))}),[s,d]),t.createElement("div",{ref:s},t.createElement(k,null,t.createElement(E,null,t.createElement(P,null,"Reading Progress"),t.createElement(_,{value:d,max:"100"}),t.createElement(C,null,function(e){return"0"===e?"Not read":"100"===e?"Completed":e+"% read"}(d))),t.createElement(S,{onClick:function(){return c(!i)}},"Update")),t.createElement(Z,{out:!i},t.createElement(I,{placeholder:d,onChange:function(e){f(e.target.value)},value:m}),t.createElement(N,null,"%"),t.createElement(z,{onClick:function(e){e.preventDefault(),(0,h._J)(n,a,m).then((function(){c(!1),u(m),f(""),(0,y.Vp)("Your reading progress has been updated")}),(function(e){400===e?(0,y.GU)("Invalid request: Couldn't update your reading progress."):(0,y.HJ)(e,"Something went wrong. Check your internet connection and try again.")}))}},"Submit")))},j=function(e){var r=e.location,n=(0,i.D3)(),f=n.isAuthenticated,p=n.user,b=r.state?r.state.isbn:"",h=(0,m.Z)(b),w=h.data,y=h.hasFetched,k=v(p,b),E=k.data,P=k.hasFetched;return null===r.state?t.createElement(s.Cq,null):f&&null!==b?t.createElement(a.Z,{heading:"Book",subheading:"In your library"},y&&P&&t.createElement(u.H,{cover:w.cover,title:w.title,author:w.author,date:w.date,desc:w.desc,category:w.category,length:w.length,avgRating:w.avgRating,ratings:w.ratings,language:w.language,isbn:w.isbn,username:p.email,deleteButton:!0,redirectAfterDelete:"/library"},t.createElement(F,{percentage:E,isbn:w.isbn,user:p.email})),!y&&t.createElement(g.i,{minHeight:"50vh"},t.createElement(g.g,{minHeight:"30vh",src:c.Z,alt:"Loading icon",className:"rotating"})),t.createElement(o.Z,{heading:"Notes",subheading:"All your notes on this book"})):t.createElement(d.Router,null,t.createElement(s.ZP,{path:"/book",component:l.default}))}}}]);
//# sourceMappingURL=component---src-pages-book-js-642080e70662d01d6ebc.js.map